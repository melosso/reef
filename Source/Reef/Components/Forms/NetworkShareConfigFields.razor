@rendermode InteractiveServer

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">UNC Path *</label>
    <input type="text" @bind="Config.UncPath" @bind:event="oninput" @bind:after="NotifyConfigChanged"
           required
           class="w-full px-3 py-2 border border-gray-300 rounded-md font-mono focus:outline-none focus:ring-blue-500 focus:border-blue-500"
           placeholder="\\server\share" />
    <p class="text-xs text-gray-500 mt-1">Network share path (e.g., \\server\share or \\192.168.1.100\data)</p>
</div>

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
    <input type="text" @bind="Config.Username" @bind:event="oninput" @bind:after="NotifyConfigChanged"
           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
           placeholder="DOMAIN\username or username" />
    <p class="text-xs text-gray-500 mt-1">Leave blank for current user credentials. Leave unchanged to keep existing value.</p>
</div>

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
    <input type="password" @bind="Config.Password" @bind:event="oninput" @bind:after="NotifyConfigChanged"
           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
    <p class="text-xs text-gray-500 mt-1">Leave blank for current user credentials. Leave unchanged to keep existing value.</p>
</div>

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Domain (Optional)</label>
    <input type="text" @bind="Config.Domain" @bind:event="oninput" @bind:after="NotifyConfigChanged"
           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
           placeholder="COMPANY" />
    <p class="text-xs text-gray-500 mt-1">Windows domain name (if applicable)</p>
</div>

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Subfolder (Optional)</label>
    <input type="text" @bind="Config.SubFolder" @bind:event="oninput" @bind:after="NotifyConfigChanged"
           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
           placeholder="exports/reports" />
    <p class="text-xs text-gray-500 mt-1">Subdirectory within the share</p>
</div>

<div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mt-4">
    <div class="flex items-start">
        <i data-lucide="info" class="w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"></i>
        <div class="text-xs text-blue-800">
            <strong>Important:</strong> Ensure the Reef service account has write permissions to the network share.
            Test the connection to verify access before using this destination in profiles.
        </div>
    </div>
</div>

@code {
    [Parameter] public DestinationConfiguration Config { get; set; } = new();
    [Parameter] public EventCallback<DestinationConfiguration> ConfigChanged { get; set; }

    private async Task NotifyConfigChanged()
    {
        await ConfigChanged.InvokeAsync(Config);
    }
}
